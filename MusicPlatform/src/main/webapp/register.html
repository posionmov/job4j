<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <style>
        .create {
            background-color: rgba(0, 0, 255, 0.24);
            width: 45%;
            height: 35%;
            padding: 3%; /*отступы внутри блока*/
            margin-top: 5%; /*Отступы от внешнего блока*/
            margin-left: 25%;
        }
    </style>

    <script>

        $.ajax({
            url: "./create",
            method: "get",
            success: function (data) {
                console.log(JSON.parse(data));
                var selectRoles = document.getElementById("role");
                var selectMusicTypes = document.getElementById("musicType");
                selectMusicTypes.multiple = true;

                var parsedData = JSON.parse(data);
                var roles = parsedData["roles"];
                var types = parsedData["types"];
                console.log(roles);
                for (var key in roles) {
                    selectRoles.options[key - 1] = new Option(roles[key], key);
                }

                for (var key in types) {
                    selectMusicTypes.options[key - 1] = new Option(types[key], key);
                }
            }
        });

        // todo Ручками дописать функцию, которая будет сохранять в массив выделенные в селекте позиции
        function createUser() {
            var name = document.getElementById("name").value;
            var login = document.getElementById("login").value;
            var password = document.getElementById("password").value;
            var role = document.getElementById("role").value;
            var address = document.getElementById("address").value;
            var musicType = document.getElementById("musicType").value;

            $.ajax({
                url: "./create",
                method: "post",
                data: {
                    name: name,
                    login: login,
                    password: password,
                    role: role,
                    address: address,
                    musicType: musicType
                },
                success: function (data) {
                    console.log(JSON.parse(data));
                }
            })
        }
    </script>
</head>
<body>
<div class="create">

    <div class="form-group">
        <label for="name">Имя:</label>
        <input type="text" class="form-control" id="name">
    </div>

    <div class="form-group">
        <label for="login">Логин:</label>
        <input type="text" class="form-control" id="login">
    </div>

    <div class="form-group">
        <label for="password">Пароль:</label>
        <input type="password" class="form-control" id="password">
    </div>

    <div class="form-group">
        <label for="role">Права доступа:</label>
        <select id="role"></select>

        <label for="musicType">Тип музыки: </label>
        <select id="musicType"></select>
    </div>

    <div class="form-group">
        Адрес: <input type="text" id="address">
    </div>

    <!--<div class="form-group">-->
        <!--Тип музыки: <select id="musicType"></select>-->
    <!--</div>-->

    <input type="button" value="Зарегистрироваться" onclick="createUser()">
</div>

</body>
</html>